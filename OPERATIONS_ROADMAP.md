# J동 회의실 예약 시스템 고도화 로드맵 (기능 우선 재설계)

이 문서는 요청사항에 맞춰 **우선순위 1 = 기능 고도화 구현**으로 재정렬한 실행 계획입니다.
운영/보안/감사 항목은 기능 구현을 막지 않는 범위에서 병행합니다.

---


## 실행 현황 (이번 반영)

- [x] Epic D-1 선반영: 예약 생성/수정/삭제에 `LockService` 기반 동시성 잠금 적용
- [x] Epic D-2 선반영: 날짜/시간 형식 검증 및 시간 범위(start < end) 검증 추가
- [x] Epic A 품질 보강: 예약자/팀명 입력 정규화(공백 제거/길이 제한)로 데이터 품질 강화
- [x] Epic A-1/A-2 반영: 수정 모드 변경 예정 항목 표시, 무변경 제출 차단, 시간 충돌 안내 문구 개선
- [x] Epic A-3 반영: 삭제 확인 모달에 대상 예약 요약 표시, 삭제 후 목록 즉시 동기화
- [x] Epic B-1/B-3 반영: 관리자 회의실 이름 수정 추가, 관리 작업(추가/수정/활성화/삭제) 후 사용자 홈 목록 즉시 동기화
- [x] Epic B-2 반영: 일반 getRooms 응답에서 비활성 회의실 제외(관리자 토큰 요청 시만 포함) 규칙 서버 강제
- [x] Epic C-1/C-2 반영: display 파라미터 정규화(대문자), 연결 실패 시 자동 갱신 backoff(최대 5분), 비활성/미존재 회의실 안내 상태 추가
- [x] Epic C-3 반영: 디스플레이 현재/다음 예약 정보 레이블화, 일정 헤더 건수 표시 등 가독성 개선
- [x] Epic D-3 반영: 층값 정규화(대문자) 및 활성 회의실 예약 가능 여부 검증으로 중복/우회 예약 규칙 일관화
- [x] Epic D 통합 검증 반영: mock E2E에 중복 시간대/비활성 회의실 예약 거부 경계 시나리오 추가
- [x] Epic D 운영 검증 반영: 관리자 화면에서 Script Property/시트/활성회의실/참조무결성 사전 점검 API 및 UI 추가

> 다음 구현 순서: 운영 체크리스트(실배포) 반복 적용 및 월간 지표 자동 집계

---

## 0) 원칙 (이번 재설계의 기준)

1. **기능 고도화 먼저**: 사용자 체감 기능을 먼저 완성
2. **작게 자주 배포**: 기능 단위를 작게 쪼개 주간 릴리즈
3. **최소 안전장치만 즉시 적용**: 회귀 확인/로그/롤백은 필수 최소치로 유지
4. **문서/보안은 기능 완료 후 확장**: 필수 항목만 병행, 나머지는 후속 주차로 이동

---

## 1) Priority 1: 기능 고도화 백로그 (핵심)

아래 4개 에픽을 우선순위 순서대로 진행합니다.

### Epic A. 예약 플로우 완성도 향상 (최우선)

- A1. 예약 생성 UX 개선
  - 시간 선택 충돌 시 즉시 안내
  - 입력 누락/유효성 메시지 명확화
- A2. 예약 수정 UX 개선
  - 기존 값 프리필 + 변경점 강조
  - 수정 완료 후 리스트/캘린더 즉시 반영
- A3. 예약 삭제 UX 안정화
  - 삭제 전 확인 단계
  - 삭제 후 잔여 상태(빈 슬롯/목록) 동기화

**완료 기준 (DoD)**
- 생성/수정/삭제 3개 플로우가 재현 가능하고, 동일 시나리오 3회 반복 시 오동작 0건

---

### Epic B. 관리자 기능 고도화 (회의실 운영)

- B1. 회의실 추가/수정/비활성화 흐름 단순화
- B2. 비활성 회의실 사용자 화면 비노출 규칙 정합화
- B3. 관리자 작업 후 즉시 반영(캐시/화면 상태) 보장

**완료 기준 (DoD)**
- 회의실 추가/수정/삭제/비활성화 후 사용자 화면 반영 지연 이슈 0건

---

### Epic C. 디스플레이 모드 실사용성 개선

- C1. `?display=층` 모드 로드 안정화
- C2. 자동 새로고침 주기/오류 복구 UX 개선
- C3. 표시 정보(현재/다음 예약) 가독성 정리

**완료 기준 (DoD)**
- 디스플레이 모드 8시간 연속 구동 중 치명 오류 0건

---

### Epic D. 예약 데이터 정합성 강화

- D1. 동시 수정/삭제 충돌 처리 정교화
- D2. 경계시간(시작=종료, 과거 시간 등) 검증 강화
- D3. 중복 예약 방지 규칙 일관화

**완료 기준 (DoD)**
- 동일 시간대 중복 예약 재현 시도 10회 중 허용 0건

---

## 2) 주차별 실행 계획 (기능 중심)

## 1주차: Epic A 집중
- 목표: 사용자 예약 핵심 플로우(생성/수정/삭제) 완성도 확보
- 산출물:
  - UX/검증 로직 개선 코드
  - 회귀 시나리오 체크리스트(수동)

## 2주차: Epic B
- 목표: 관리자 회의실 관리 완성
- 산출물:
  - 회의실 관리 시나리오 정리
  - 사용자 화면 반영 검증 결과

## 3주차: Epic C
- 목표: 디스플레이 모드 안정화
- 산출물:
  - 장시간 구동 점검 결과
  - 복구 동작 시나리오

## 4주차: Epic D + 통합 안정화
- 목표: 데이터 정합성/충돌 처리 마무리
- 산출물:
  - 경계조건 테스트 결과
  - 최종 릴리즈 노트

---

## 3) 최소 병행 항목 (기능 구현을 막지 않는 수준)

- 배포 전 최소 검증
  - 예약 생성/수정/삭제
  - 관리자 모드 진입/회의실 관리
- 장애 시 롤백 가능 상태 유지
- 감사로그는 현재 구현 범위 유지(확장은 후순위)

---

## 4) 우선순위 재정렬된 체크리스트

- [ ] Epic A 완료
- [ ] Epic B 완료
- [ ] Epic C 완료
- [ ] Epic D 완료
- [ ] 통합 회귀 1회 통과
- [ ] 운영/보안 고도화 항목 후속 반영 계획 확정

---

## 5) 의사결정 규칙 (중요)

- 기능 일정과 운영 항목이 충돌하면 **기능 일정 우선**
- 단, 아래 3개는 무조건 유지:
  1. 롤백 가능 상태
  2. 관리자 인증 동작
  3. 예약 데이터 무결성

즉, 이번 사이클은 “운영 문서 확대”보다 “기능 완성도”를 먼저 달성합니다.
