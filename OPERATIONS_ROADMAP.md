# J동 회의실 예약 시스템 고도화 로드맵 (전산팀 대응형)

이 문서는 **운영 안정성/보안/감사 대응**을 목표로 한 단계별 실행 계획입니다.

---

## 0) 목표

- 사용자 입장: 예약 생성/수정/삭제가 일관되고 혼란이 없을 것
- 운영팀 입장: 장애 시 원인 추적 가능, 변경 이력 확인 가능, 복구 절차 명확
- 전산팀 입장: 보안 통제(인증/권한/비밀값 관리), 감사로그, 배포 절차가 문서화

---

## 1주차 (필수 안정화)

### 1-1. 운영 체크리스트 확정
- 배포 전 체크리스트(기능/보안/캐시/롤백) 문서화
- 담당자/승인자/배포 시간대 지정

**완료 기준**
- 체크리스트 문서 1개 + 실제 배포 1회 적용

### 1-2. 비밀값 운영 절차 고정
- Script Properties 필수 키 점검:
  - `ADMIN_CODE`
  - `PASSWORD_PEPPER`
- 비밀값 변경 주기/교체 절차 작성

**완료 기준**
- 키 누락 시 배포 중단 규칙 확정

### 1-3. 회귀 테스트 루틴 도입
- `python3 scripts/run_mock_e2e.py`를 배포 전 필수 단계로 지정

**완료 기준**
- 최근 배포 1회에서 테스트 통과 로그 첨부

---

## 2주차 (보안/감사 고도화)

### 2-1. 감사 로그 시트 추가
- `Audit` 시트 생성
- 이벤트 기록:
  - 예약 생성/수정/삭제
  - 관리자 인증 성공/실패
  - 회의실 추가/수정/삭제
- 로그 필드 예시:
  - timestamp, action, actorType(user/admin), reservationId/roomId, result, reason

**완료 기준**
- 주요 이벤트 100% 로그 적재

### 2-2. 관리자 보안 강화
- 관리자 인증 실패 누적 정책 검증(잠금/해제)
- 관리자 토큰 TTL 재검토

**완료 기준**
- 관리자 인증 정책 문서 + 테스트 시나리오 통과

### 2-3. 장애 대응 런북 작성
- Apps Script 장애 시 사용자 안내 문구
- 수동 복구/롤백 절차
- 캐시 초기화 강제 가이드(운영자용)

**완료 기준**
- 런북 문서 1개 + 모의훈련 1회

---

## 4주차 (운영 자동화)

### 4-1. 릴리즈 버전 관리
- 앱 화면 또는 콘솔에 빌드 버전 노출
- 배포 이력(버전, 일시, 변경자, 변경요약) 기록

### 4-2. 자동 검증 확장
- Mock E2E 확장:
  - 토큰 만료
  - 수정 중 충돌
  - 관리자 회의실 관리 시나리오
  - display 모드 확인
- 실패 시 배포 차단 규칙 적용

### 4-3. 데이터 무결성 보호
- 예약 생성/수정 시 동시성 보호(LockService)
- 비정상 데이터 정합성 점검 배치

**완료 기준**
- 월간 장애 0건 또는 장애 원인 100% 추적 가능

---

## 주간 운영 점검표 (요약)

- [ ] 배포 전 mock E2E 통과
- [ ] Script Properties 키 정상
- [ ] 관리자 인증 실패율 이상 없음
- [ ] 감사로그 적재 정상
- [ ] 최근 배포 후 사용자 문의 급증 없음

---

## 권장 진행 순서

1. 1주차 항목부터 바로 적용
2. 2주차 감사/보안 항목 동시 진행
3. 4주차 자동화는 작은 단위로 나눠 주간 반영

> 핵심: “기능 추가”보다 “운영 재현성(테스트/로그/런북)”을 먼저 고정하면,
> 이후 고도화 속도가 빨라지고 장애 비용이 크게 줄어듭니다.
